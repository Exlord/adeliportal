<?
$this->headLink()->prependStylesheet($this->basePath() . '/css/online-order-admin.css');

$select = $this->select;
$formNew = $this->formNew;
$formEdit = $this->formEdit;
$route = $this->route;
$admin_route = $this->admin_route;
$route_prefix = $admin_route ? 'admin' : 'app';
?>
<style>

    .div-new-lang {
        width: auto;
        padding: 10px;
        text-align: right;
        line-height: 30px;
        display: none;
        border: 1px solid #139ff7;
        border-radius: 4px;
        background-color: #fcf8e3;
        left: 50px;
        top: 50px;
        position: absolute;
    }

    .div-edit-lang {
        width: auto;
        padding: 10px;
        text-align: right;
        line-height: 30px;
        display: none;
        border: 1px solid #139ff7;
        border-radius: 4px;
        background-color: #fcf8e3;
        left: 30px;
        position: absolute;
    }
    .btnEditLang{
        background-image: url(<?=$this->basePath() ?>/images/plus-icon1.png);
        border: none;
        border-radius: 5px;
        width: 15px;
        height: 15px;
        cursor: pointer;
    }
    .btnEditLang1{
        background-image: url(<?=$this->basePath() ?>/images/min-icon.png);
        border: none;
        width: 15px;
        height: 15px;
        cursor: pointer;
        border-radius: 5px;
    }
</style>
<div>
    <a id="btnCreateLang"
       class="toolbar-button button add_button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-secondary"
       href="#" role="button" aria-disabled="false">
        <span class="ui-button-text"><?=t('New Language')?></span>
        <span class="ui-button-icon-secondary ui-icon ui-icon-plus"></span>
    </a>

    <br/><br/>

    <div class="div-new-lang" id="createLangsTab" style="display: none;">
        <?
        $formNew->prepare();
        echo $this->form()->openTag($formNew);
        foreach ($formNew->getElements() as $el) {
            echo $this->iptformRow($el);
        }
        echo $this->form()->closeTag();
        ?>
    </div>
</div>

<br/>
<table align=center class="tbl-data-grid" style="width: 100%">
    <thead>
    <tr align=center >
        <th><?=t('Rows');?></th>
        <th><?=t('Language Name');?></th>
        <th><?=t('Language Code');?></th>
        <th><?=t('Operations');?></th>
    </tr>
    </thead>
    <tbody>
    <?
    $j = 1;
    $countClass = 1;
    foreach ($select as $row) {
        if ($countClass == 0) {
            $class = "class='tbl-data-grid-tr-1'";
            $countClass = 1;
        } else {
            $class = "class='tbl-data-grid-tr-2'";
            $countClass = 0;
        }

        ?>
        <tr align="center" <?=$class?>>
            <td><?=$j?></td>
            <td><?=$row->langName?></td>
            <td><?=$row->langCode?></td>
            <td width="100"><input type="button" class="btnEditLang" value="" id="<?= $row->id ?>">

                <div class="div-edit-lang" id="div-edit-lang-<?= $row->id ?>">
                    <?
                    $formEdit->setData($row);
                    $formEdit->prepare();
                    echo $this->form()->openTag($formEdit);
                    foreach ($formEdit->getElements() as $el) {
                        echo $this->iptFormRow($el);
                    }
                    echo $this->form()->closeTag();
                    ?>
                </div>
            </td>
        </tr>
        <?
        $j++;
    }
    ?>
    </tbody>
</table>
<div class="pager">
    <?=
    $this->paginationControl($this->select,
        'Sliding',
        'application/pagination/search.phtml', array('route' => $route_prefix . '/online-orders/language-select')); ?>
</div>
<script>
    $(document).ready(function () {

        $('#btnCreateLang').click(function () {
            $('#createLangsTab').slideToggle(1000);
        });

        $('.btnEditLang').click(function () {
            var idLang = $(this).attr('id');
            var x = $(this).position();
            $(this).toggleClass('btnEditLang1');
            $('#div-edit-lang-' + idLang).css({top: (x.top) + 30});
            $('#div-edit-lang-' + idLang).slideToggle(1000);
        });

    });

</script>
