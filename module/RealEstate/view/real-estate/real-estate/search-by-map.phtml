<?
$this->headLink()->appendStylesheet($this->basePath() . '/css/search-by-map.css');
$this->headScript()->appendFile($this->basePath() . '/map-hover/jquery.maphilight.min.js');

?>
<div class="box_search_map">
    <?
    if ($this->estateRegType) {
        ?>
        <div class="front_box_search"></div>
        <ul class="ul_search_reg_type">
            <div class="attention_box_search">
                <span class="attention_icon"></span>
                <span class="attention_text">
                    کاربر گرامی : امکانات نقشه تا اطلاع ثانوی برای شهر تبریز مورد استفاده می باشد.
                </span>
            </div>
            <div style="clear: both"></div>
            <label><?= t('REALESTATE_REG_TYPE_DESC') ?></label>

            <div style="clear: both"></div>
            <?
            foreach ($this->estateRegType as $row) {
                ?>
                <li>
                    <input type="radio" name="reg_type" value="<?= $row->id ?>"><?= $row->itemName ?>
                </li>
            <?
            }
            ?>
        </ul>
    <?
    }
    ?>
    <div class="map"
         style="display: block; background: url(<?= $this->basePath() . '/images/search-by-map/empty.gif' ?>) repeat scroll 0% 0% transparent; position: relative; padding: 0px; width: 960px; height: 561px;">
        <canvas
            style="width: 960px; height: 561px; position: absolute; left: 0px; top: 0px; padding: 0px; border: 0px none;"
            height="561" width="960"></canvas>
        <img class="map maphilighted" width="960" height="561" usemap="#world"
             src="<?= $this->basePath() . '/images/search-by-map/map2-2.jpg' ?>"
             style="opacity: 0; position: absolute; left: 0px; top: 0px; padding: 0px; border: 0px none;">
    </div>

    <map name="world" id="Map">
        <area class="map_part" data-id="288" shape="poly"
              coords="893,329,885,350,868,363,856,363,843,354,834,333,830,311,820,300,812,290,791,278,776,264,752,258,729,253,712,246,697,234,685,214,695,201,715,196,732,190,752,190,766,192,789,204,805,216,828,232,853,253,874,272,888,285,894,309,894,329"
              href="#" alt="باغمیشه و رشدیه"/>
        <area class="map_part" data-id="289" shape="poly"
              coords="828,342,829,361,828,376,826,385,804,386,787,386,765,381,741,374,723,372,711,375,689,377,673,371,668,348,676,331,687,307,700,295,724,283,743,278,763,278,782,285,800,292,816,303,824,316"
              href="#" alt="ولیعصر"/>
        <area class="map_part" data-id="290" shape="poly"
              coords="860,408,866,427,864,449,856,458,831,456,800,443,778,434,759,428,738,419,729,415,717,412,701,411,691,403,685,395,682,386,690,379,705,372,729,371,753,376,772,380,788,385,807,385,823,385,839,389,850,394"
              href="#" alt="دروازه"/>
        <area class="map_part" data-id="291" shape="poly"
              coords="853,505,843,521,831,533,816,542,804,549,791,557,773,562,750,561,734,558,716,551,700,541,690,521,690,500,691,477,694,460,696,448,702,435,714,427,727,419,749,422,768,431,778,439,791,448,799,454,809,459,821,464,834,475,845,479,852,492,853,503"
              href="#" alt="ائل گولی"/>
        <area class="map_part" data-id="292" shape="poly"
              coords="693,455,689,474,687,491,683,503,679,506,670,498,658,491,637,484,626,472,628,460,628,448,628,440,626,430,617,425,622,413,627,405,634,395,649,390,677,393,665,390,688,402,692,409,699,420,698,432"
              href="#" alt="زعفرانیه"/>
        <area class="map_part" data-id="295" shape="poly"
              coords="621,466,608,471,593,465,581,459,564,451,557,446,540,445,532,441,525,430,518,421,518,408,517,395,514,378,513,361,510,349,506,339,504,325,508,312,515,306,526,310,540,321,550,335,561,351,568,362,577,370,586,374,598,381,611,390,617,398,618,412,619,428,622,437,625,453,620,465"
              href="#" alt="ساری زمین و مارالان"/>
        <area class="map_part" data-id="296" shape="poly"
              coords="507,435,489,444,473,449,453,448,435,440,424,431,417,419,411,401,409,386,409,362,412,344,422,328,439,319,455,315,479,315,489,322,491,342,500,363,504,388,509,404,512,420,509,434"
              href="#" alt="طالقانی"/>
        <area class="map_part" data-id="294" shape="poly"
              coords="644,362,641,379,638,383,625,380,610,375,596,371,586,363,578,356,570,351,559,341,554,329,543,316,535,309,523,301,513,294,512,280,517,268,532,263,546,267,562,273,573,276,590,279,598,289,605,300,616,306,633,310,654,314,651,330,649,346,646,354,646,362"
              href="#" alt="آبرسانی"/>
        <area class="map_part" data-id="293" shape="poly"
              coords="713,277,705,287,694,297,681,309,673,313,663,322,651,317,631,310,606,299,600,290,593,281,590,260,594,241,597,222,601,200,607,184,613,176,620,170,630,180,640,188,651,199,661,208,675,217,685,232,700,242,712,253,720,259,727,265,723,276"
              href="#" alt="عباسی"/>
        <area class="map_part" data-id="299" shape="poly"
              coords="409,428,386,435,372,436,361,437,349,430,346,420,337,404,329,391,328,374,333,365,357,358,376,351,386,351,397,351,405,355,409,375,413,395,412,411,409,425"
              href="#" alt="منظریه"/>
        <area class="map_part" data-id="297" shape="poly"
              coords="596,205,592,221,588,239,586,254,584,264,570,266,557,260,537,253,520,245,509,239,496,232,487,228,484,221,489,202,502,184,512,172,517,161,530,146,541,133,551,127,561,138,568,150,585,161,594,170,602,173,602,189"
              href="#" alt="ششگلان"/>
        <area class="map_part" data-id="298" shape="poly"
              coords="507,298,496,311,488,311,474,307,452,298,441,292,431,284,418,275,407,266,397,251,388,241,390,229,391,215,401,201,409,193,415,187,426,179,437,179,447,188,458,197,470,209,481,220,488,229,500,234,506,247,507,261,509,277,506,299"
              href="#" alt="بازار"/>
        <area class="map_part" data-id="300" shape="poly"
              coords="437,315,420,328,408,338,398,345,385,350,373,354,355,358,342,361,332,363,324,363,315,357,308,344,304,329,300,319,302,308,310,295,322,284,335,273,351,265,366,259,386,262,397,270,419,279,436,288,442,302"
              href="#" alt="چرنداب و لیل آباد"/>
        <area class="map_part" data-id="308" shape="poly"
              coords="546,129,534,141,523,154,516,162,502,178,499,186,488,199,483,217,484,224,476,210,469,199,459,190,454,181,444,165,435,153,430,146,426,133,429,122,449,119,477,123,503,122,517,121,533,122"
              href="#" alt="دوده چی"/>
        <area class="map_part" data-id="302" shape="poly"
              coords="62,523,65,534,72,548,73,560,11,558,3,550,2,475,9,476,25,491,47,499,52,500" href="#" alt="سهند"/>
        <area class="map_part" data-id="16" shape="poly"
              coords="254,424,246,436,229,455,214,470,196,481,178,490,140,498,103,502,73,503,49,500,29,492,14,478,7,455,12,435,17,424,40,411,63,402,81,396,103,403,130,403,165,409,191,414,213,411,253,412,258,421"
              href="#" alt="اندیشه"/>
        <area class="map_part" data-id="301" shape="poly"
              coords="321,380,314,393,307,397,295,400,273,400,258,403,232,403,217,407,198,403,181,403,160,403,140,403,122,404,106,400,98,395,99,384,112,374,126,359,143,349,159,337,169,330,191,325,212,322,238,322,258,322,272,320,287,315,295,312,301,326,310,337,314,353,320,374"
              href="#" alt="لاله"/>
        <area class="map_part" data-id="305" shape="poly"
              coords="333,183,320,196,304,199,289,199,272,194,256,192,242,186,224,186,208,174,194,170,183,159,180,144,182,124,192,106,203,98,223,94,252,97,263,108,288,116,304,130,319,142,332,158,336,176"
              href="#" alt="شهرک امام"/>
        <area class="map_part" data-id="306" shape="poly"
              coords="417,182,400,201,390,206,379,211,368,206,357,195,346,176,335,160,319,140,310,130,298,114,284,109,264,102,245,92,231,89,217,78,205,73,189,60,179,42,173,25,174,1,196,19,210,28,234,37,255,37,287,33,305,35,331,44,350,56,362,65,374,78,388,91,403,104,415,116,422,127,427,147,423,167"
              href="#" alt="امیرخیز و آذربایجان و فرودگاه"/>
        <area class="map_part" data-id="307" shape="poly"
              coords="547,117,522,121,510,122,480,123,456,122,437,117,412,110,396,98,385,86,373,69,367,57,367,39,382,26,387,18,401,11,415,4,447,4,470,14,484,22,498,32,519,48,536,63,542,84,546,105,548,117"
              href="#" alt="ارم و فجر"/>
        <area class="map_part" data-id="309" shape="poly"
              coords="336,270,330,277,325,282,318,289,309,297,301,300,295,303,288,297,276,287,270,276,266,263,260,254,258,240,252,219,252,207,253,196,257,196,272,198,303,202,314,206,328,213,337,224,346,235,348,249,348,258,345,264,345,269"
              href="#" alt="قره آغاج"/>
        <area class="map_part" data-id="304" shape="poly"
              coords="291,308,276,320,248,321,226,324,200,317,184,307,175,295,169,285,169,268,171,250,174,234,175,211,181,199,191,194,212,194,237,194,251,200,253,216,253,230,258,247,264,264,270,274,275,284,283,293,295,300,298,305"
              href="#" alt="خطیب و راه آهن"/>
    </map>


</div>
<script>
    var searchByMapUrl = '<?=url('app/real-estate/list')?>';
    $(document).ready(function () {
        var estate_reg_type = 0;
        if ($('.ul_search_reg_type')) {
            $('.ul_search_reg_type li input').click(function () {
                estate_reg_type = $(this).val();
                if (!$('.box_search_map').hasClass('active_map')) {
                    $('.ul_search_reg_type').animate({ opacity: '0' });
                    $('.attention_box_search').hide();
                    $('.ul_search_reg_type').css('height',57);
                    $('.ul_search_reg_type').delay(200).show().animate({ top: 503, opacity: '1' }, {duration: 1000, easing: 'easeOutBounce'});
                    $('.front_box_search').fadeOut(500).delay(200).hide();
                    $('.box_search_map').addClass('active_map');
                }
            })
        }

        $('.map_part').click(function(){
            var regType = $(this).data('id');
            var url = searchByMapUrl+'?table[parentAreaId]='+regType+'&table[regType]='+estate_reg_type+'&search=Search';
            $(location).attr('href',url);
        });

        $('.map').maphilight({fill: true,
            fillColor: '008800',
            fillOpacity: 0.2,
            stroke: true,
            strokeColor: '008800',
            strokeOpacity: 0.2,
            strokeWidth: 1,
            fade: true,
            alwaysOn: false,
            neverOn: false,
            groupBy: false,
            wrapClass: true,
            shadow: false,
            shadowX: 1,
            shadowY: 1,
            shadowRadius: 6,
            shadowColor: '000000',
            shadowOpacity: 0.8,
            shadowPosition: 'outside',
            shadowFrom: false});
    });
</script>